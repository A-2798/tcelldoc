{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/user/Documents/HBuilderProjects/tcelldoc/pagesA/index/identity.vue?3fc2","webpack:///C:/Users/user/Documents/HBuilderProjects/tcelldoc/pagesA/index/identity.vue?a2ee","webpack:///C:/Users/user/Documents/HBuilderProjects/tcelldoc/pagesA/index/identity.vue?d7d3","webpack:///C:/Users/user/Documents/HBuilderProjects/tcelldoc/pagesA/index/identity.vue?8446","uni-app:///pagesA/index/identity.vue","webpack:///C:/Users/user/Documents/HBuilderProjects/tcelldoc/pagesA/index/identity.vue?ffc2"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,8C,mDACAA,EAAWC,a;;;;2DCHX,sTACIC,EADJ,qKASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,4BACZ,aAAAF,E;;;;2GCvBf,ynC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,6uBAAsrB,eAAG,G;;;;0ICwBzrB,iCAMA,gC,6rBAIA,CACA,mBACA,4DAEA,KAJA,WAKA,OACA,cACA,eACA,eACA,eAGA,SAEA,cAFA,WAGA,WACA,eACA,QACA,mCACA,oBAEA,6CACA,iCACA,iCACA,mBAMA,eAlBA,SAkBA,cAEA,yBACA,WACA,gBACA,gBACA,SACA,UAEA,gBACA,SACA,WAEA,gBACA,SACA,WAEA,yBACA,2CACA,wBAEA,qBAEA,WACA,uDACA,qDACA,mBACA,kDACA,cAGA,IAFA,uEACA,KACA,YACA,yCAEA,8BAEA,aACA,cACA,WACA,uBACA,YACA,UACA,UACA,gBACA,0BACA,uBAEA,oBAEA,GADA,2BACA,iBAIA,eAGA,OACA,kBACA,sCAGA,cACA,SACA,GACA,GAGA,uBACA,wCACA,wBAKA,cACA,mCAWA,4B;;;;2DCtJA,qzCAAuwC,eAAG,G","file":"pagesA/index/identity.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pagesA/index/identity.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./identity.vue?vue&type=template&id=47b77d8f&scoped=true&\"\nvar renderjs\nimport script from \"./identity.vue?vue&type=script&lang=js&\"\nexport * from \"./identity.vue?vue&type=script&lang=js&\"\nimport style0 from \"./identity.vue?vue&type=style&index=0&id=47b77d8f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47b77d8f\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesA/index/identity.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identity.vue?vue&type=template&id=47b77d8f&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identity.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identity.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<view class=\"kang\">\n\t\t\t<span class=\"zhi\">上传身份证明</span>\n\t\t</view>\n\n\t\t<view class=\"jun\">\n\t\t\t<view class=\"jia\">\n\t\t\t\t<view class=\"ye\">请上传</view>\n\t\t\t\t<view class=\"zi\">执业证,资格证,医院工作证,胸牌均可作为</view>\n\t\t\t\t<view class=\"ping\">凭证。</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- <view class=\"default\" 　v-mode=\"chooseHead\" 　@tap=\"chooseHeadUrl\">上传图片</view> -->\r\n\t\t<image class=\"default\" 　v-mode=\"chooseHead\" 　@tap=\"chooseHeadUrl\" :src=\"portraitUri\" mode=\"\">\t\t\t\t\r\n\t\t</image>\n\t\t<button>跳转</button>\n\t\t<button v-mode=\"uploadImage\" @tap=\"uploadImageUrl\">上传</button>\n\t</view>\n</template>\n\n<script>\r\n\t\n\timport {\n\t\tuploadMessage\n\t} from 'API/message.js'\n\t// import {\n\t// \tgetSTS\n\t// } from 'API/getSTS.js'\r\n\timport {\r\n\t\tgetPolicyPrivate\r\n\t} from '../../API/OSS.js'\n\n\texport default {\n\t\tonLoad: function(option) {\n\t\t\tthis.userData2 = JSON.parse(decodeURIComponent(option.userData1));\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tchooseHead: '',\n\t\t\t\tuploadImage: '',\n\t\t\t\tportraitUri: '',\n\t\t\t\tuserData2: {}\n\t\t\t}\n\t\t},\n\t\tmethods: {  \r\n\t\t\t//选择图片\r\n\t\t\tchooseHeadUrl() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1, //默认9 \r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t// 这里上传网络图片路径，那个页面获取网络图片路径即可 \r\n\t\t\t\t\t\tconsole.log(JSON.stringify(res.tempFilePaths));\r\n\t\t\t\t\t\tthat.portraitUri = res.tempFilePaths[0]\r\n\t\t\t\t\t\tconsole.log(that.portraitUri, '999');\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\t//上传图片/音频/视频到OSS\n\t\t\tuploadImageUrl(msg) {\n\t\t\t\tlet that = this\r\n\t\t\t\tif (this.portraitUri != '') {\r\n\t\t\t\t\tlet that = this\n\t\t\t\tlet reg = RegExp(/mp3/)\n\t\t\t\tlet regVideo = RegExp(/mp4/)\n\t\t\t\tlet format = '.jpg'\n\t\t\t\tlet location = 'image' \r\n\t           \n\t\t\t\tif (reg.test(msg.url)) {\n\t\t\t\t\tformat = '.mp3'\n\t\t\t\t\tlocation = 'audio'\n\t\t\t\t}\n\t\t\t\tif (regVideo.test(msg.url)) {\n\t\t\t\t\tformat = '.mp4'\n\t\t\t\t\tlocation = 'vedio'\n\t\t\t\t}\n\t\t\t\tlet position = 'tcelldoc/' + 'image' + '/' \n\t\t\t\tgetPolicyPrivate(position).then((res) => {\r\n\t\t\t\t\tconsole.log(res,'creads')\n\t\t\t\t\t// 向后台发请求 拉取OSS相关配置\n\t\t\t\t\tconst creds = res[1].data.data;\n\t\t\t\t\t//随机数\n\t\t\t\t\tlet date = new Date()\n\t\t\t\t\tlet d = date.getFullYear() + '-' + ((date.getMonth() + 1) > 9 ? (date.getMonth() + 1) : (\n\t\t\t\t\t\t\t'0' + (date.getMonth() + 1))) + '/image--' + date.getDate() + 'day' + date\n\t\t\t\t\t\t.getHours() + 'hours' +\n\t\t\t\t\t\tdate.getMinutes() + 'minutes' + date.getSeconds() + 'seconds'\n\t\t\t\t\tfunction randomString(length) {\n\t\t\t\t\t\tvar str = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\t\t\t\t\t\tvar result = \"\";\n\t\t\t\t\t\tfor (var i = length; i > 0; --i) {\n\t\t\t\t\t\t\tresult += str[Math.floor(Math.random() * str.length)];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn result + (new Date()).valueOf();\n\t\t\t\t\t}\n\t\t\t\t\tconst SJS = d + randomString(6);\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl: creds.host, // 开发者服务器的URL。  \n\t\t\t\t\t\tfilePath: that.portraitUri,\n\t\t\t\t\t\tname: 'file', // 必须填file。\t\n\t\t\t\t\t\tformData: {\n\t\t\t\t\t\t\tkey: position + SJS + format,\n\t\t\t\t\t\t\tpolicy: creds.policy,\n\t\t\t\t\t\t\tOSSAccessKeyId: creds.accessid,\n\t\t\t\t\t\t\tsignature: creds.signature,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconsole.log(res,'这个是oss返回的')\n\t\t\t\t\t\t\tif (location == 'audio') {\n\t\t\t\t\t\t\t\t// signatureUrl(creds.host + '/' + position + SJS + format).then(r=> {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// })\n\t\t\t\t\t\t\t} else if (location == 'image') {\n\t\t\t\t\t\t\t\t // signatureUrl(creds.host + '/' + position + SJS + format).then(r => {\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tlet obj1 = {\r\n\t\t\t\t\t\t\t\t\t\tspeciality: this.text,\r\n\t\t\t\t\t\t\t\t\t\tidentificationPaper: creds.host + '/' + position + SJS + format,\r\n\t\t\t\t\t\t\t\t\t\t// portraitUri: that.portraitUri,\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tlet obj2 = that.userData2;\r\n\t\t\t\t\t\t\t\t\tlet obj3 = { \r\n\t\t\t\t\t\t\t\t\t\t...obj1,\r\n\t\t\t\t\t\t\t\t\t\t...obj2 \r\n\t\t\t\t\t\t\t\t\t}; \r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tconsole.log(obj3,'5556');\r\n\t\t\t\t\t\t\t\t\tuploadMessage(obj3).then(res => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res,'959595')\r\n\t\t\t\t\t\t\t\t\t\t// uni.setStorage({ //缓存后端名字\r\n\t\t\t\t\t\t\t\t\t\t// \tkey:'name',\r\n\t\t\t\t\t\t\t\t\t\t// \tdata:obj3.name\r\n\t\t\t\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '../tabbar/index/index', //请求成功后跳转首页\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t// })\n\t\t\t\t\t\t\t}  else if (location == 'vedio') {\n\t\t\t\t\t\t\t\t// signatureUrl(creds.host + '/' + position + SJS + format).then(r => {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: err => {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\r\n\t\t\t}\n\t\t\t},\n\t\t},\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.kang {\n\t\twidth: 100%;\n\t\theight: 127.27rpx;\n\t\tbackground: #D8D8D8;\n\t\tline-height: 127.27rpx;\n\t\ttext-align: center;\n\n\t\t.zhi {\n\t\t\twidth: 229.09rpx;\n\t\t\theight: 52.72rpx;\n\t\t\tline-height: 52.72rpx;\n\t\t\tcolor: #000000;\n\t\t\tfont-size: 38.18rpx;\n\t\t}\n\t}\n\n\t.jun {\n\t\twidth: 100%;\n\t\theight: 254.54rpx;\n\t\tbackground: rgba(0, 0, 0, 0.10);\n\n\t\tpadding-top: 30px;\n\n\t\t.jia {\n\t\t\twidth: 654.54rpx;\n\t\t\theight: 172.72rpx;\n\t\t\tmargin-left: 50.54rpx;\n\t\t\tmargin: auto;\n\n\t\t\t.ye {\n\n\t\t\t\twidth: 150.18rpx;\n\t\t\t\theight: 45.45rpx;\n\t\t\t\tcolor: #000000;\n\t\t\t\tmargin-left: 54.54rpx;\n\t\t\t\tpadding-top: 18.18rpx;\n\t\t\t}\n\n\t\t\t.ping {\n\t\t\t\tfloat: left;\n\t\t\t\tmargin-left: 46rpx;\n\t\t\t}\n\n\t\t\t.zi {\n\t\t\t\tfont-size: 32.72rpx;\n\t\t\t\tcolor: #000000;\n\t\t\t\tline-height: 45.45rpx;\n\t\t\t\tmargin-left: 50.54rpx;\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\t.default {\n\t\twidth: 640rpx;\n\t\theight: 390.9rpx;\n\t\tborder: 1px solid #979797;\n\t\tmargin-top: 90.9rpx;\n\t\tmargin-left: 54.54rpx;\n\t}\n\n\tbutton {\n\t\twidth: 300rpx;\n\t\tfloat: left;\n\t\tmargin-top: 100rpx;\n\t\tmargin-left: 50rpx;\n\n\t}\n</style>\n","import mod from \"-!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identity.vue?vue&type=style&index=0&id=47b77d8f&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identity.vue?vue&type=style&index=0&id=47b77d8f&lang=scss&scoped=true&\""],"sourceRoot":""}