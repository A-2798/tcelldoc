{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/user/Documents/HBuilderProjects/tcelldoc/pagesB/HM-chat/HM-chat.vue?54d1","webpack:///C:/Users/user/Documents/HBuilderProjects/tcelldoc/pagesB/HM-chat/HM-chat.vue?fb99","webpack:///C:/Users/user/Documents/HBuilderProjects/tcelldoc/pagesB/HM-chat/HM-chat.vue?538f","webpack:///C:/Users/user/Documents/HBuilderProjects/tcelldoc/pagesB/HM-chat/HM-chat.vue?e3a2","uni-app:///pagesB/HM-chat/HM-chat.vue","webpack:///C:/Users/user/Documents/HBuilderProjects/tcelldoc/pagesB/HM-chat/HM-chat.vue?9bab"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,+C,mDACAA,EAAWC,a;;;;2DCHX,mTACIC,EADJ,qKASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,6BACZ,aAAAF,E;;;;2GCvBf,wnC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,4uBAAqrB,eAAG,G;;;;0ICiKxrB,I,EAAA,0BAOA,GAHA,0BAGA,yBAKA,+BACA,mB,ovBAEA,K,WACA,OAEA,WAEA,oBACA,mBACA,YACA,gBACA,WACA,cACA,QAIA,gCAEA,WACA,iBACA,sBACA,aACA,YACA,WACA,aACA,KAEA,iBACA,eAEA,kCACA,eACA,gBAEA,mBAEA,YAEA,aAEA,gBACA,WACA,EACA,iBACA,YACA,CACA,oBACA,aACA,CACA,mBACA,YACA,CACA,qBACA,YACA,CACA,kBACA,YACA,CACA,kBACA,YACA,CACA,oBACA,YACA,CACA,oBACA,YACA,CACA,mBACA,YACA,CACA,mBACA,YACA,CACA,iBACA,WACA,CACA,iBACA,cACA,CACA,mBACA,YACA,CACA,mBACA,YACA,CACA,oBACA,YACA,CACA,iBACA,YACA,CACA,mBACA,YACA,CACA,gBACA,WACA,CACA,iBACA,YACA,CACA,oBACA,YACA,CACA,iBACA,WACA,CACA,mBACA,WACA,CACA,kBACA,YACA,CACA,iBACA,aAEA,EACA,mBACA,YACA,CACA,eACA,WACA,CACA,gBACA,WACA,CACA,sBACA,YACA,CACA,gBACA,WACA,CACA,2BACA,cACA,CACA,iBACA,YACA,CACA,qBACA,aACA,CACA,eACA,WACA,CACA,iBACA,YACA,CACA,oBACA,aACA,CACA,iBACA,WACA,CACA,mBACA,YACA,CACA,mBACA,YACA,CACA,sBACA,YACA,CACA,qBACA,aACA,CACA,oBACA,YACA,CACA,kBACA,WACA,CACA,qBACA,WACA,CACA,kBACA,YACA,CACA,sBACA,aACA,CACA,oBACA,YACA,CACA,eACA,WACA,CACA,iBACA,aAEA,EACA,oBACA,YACA,CACA,kBACA,YACA,CACA,mBACA,cACA,CACA,qBACA,YACA,CACA,iBACA,YACA,CACA,eACA,WACA,CACA,oBACA,YACA,CACA,kBACA,YACA,CACA,wBACA,aACA,CACA,gBACA,WACA,CACA,uBACA,cACA,CACA,sBACA,YACA,CACA,mBACA,YACA,CACA,mBACA,YACA,CACA,wBACA,aACA,CACA,kBACA,YACA,CACA,kBACA,YACA,CACA,kBACA,WACA,CACA,iBACA,WACA,CACA,mBACA,YACA,CACA,eACA,YACA,CACA,eACA,WACA,CACA,gBACA,WACA,CACA,kBACA,aAEA,EACA,iBACA,cACA,CACA,iBACA,cACA,CACA,gBACA,WACA,CACA,eACA,YACA,CACA,oBACA,YACA,CACA,gBACA,WACA,CACA,mBACA,YACA,CACA,eACA,WACA,CACA,gBACA,WACA,CACA,kBACA,YACA,CACA,qBACA,YACA,CACA,gBACA,WACA,CACA,mBACA,YACA,CACA,kBACA,YACA,CACA,mBACA,YACA,CACA,oBACA,YACA,CACA,kBACA,YACA,CACA,iBACA,YACA,CACA,oBACA,aACA,CACA,kBACA,YACA,CACA,oBACA,YACA,CACA,mBACA,YACA,CACA,wBACA,aACA,CACA,kBACA,YAEA,EACA,kBACA,YACA,CACA,uBACA,aACA,CACA,oBACA,YACA,CACA,oBACA,YACA,CACA,oBACA,YACA,CACA,kBACA,YACA,CACA,qBACA,cAIA,iBAGA,Q,WACA,2BAEA,O,SAAA,cACA,kBAEA,gCACA,oBAIA,mCACA,oBAGA,kCACA,oB,yBAKA,0B,YAGA,CACA,WADA,WAGA,uBACA,qC,qBAKA,kC,cAEA,CAEA,YAFA,SAEA,GACA,WACA,WACA,OACA,KACA,KACA,6CACA,sDACA,kCACA,SACA,GACA,YACA,KACA,wBACA,qCACA,OACA,UACA,iCACA,kBACA,wGAEA,iBAGA,8CACA,UACA,oDACA,sCACA,eACA,eACA,cAEA,GACA,YACA,KACA,wBACA,qCACA,OACA,UACA,iCACA,kBACA,wGAEA,SACA,sCACA,KACA,aAKA,6BACA,2CACA,QACA,wCAEA,qCACA,mBAIA,gBA/DA,SA+DA,KACA,WAEA,6BAEA,cAEA,0CAEA,8BACA,QACA,cACA,SACA,yBAEA,kBACA,2BACA,mBACA,sCAEA,mCACA,yBACA,QACA,cACA,SACA,4BACA,gCACA,cAEA,kBACA,8BAEA,iCACA,wBACA,QACA,cACA,SACA,sBACA,kBAEA,kBACA,+BAMA,UA9GA,SA8GA,iEACA,OAEA,oBAEA,mBACA,WACA,yBACA,WAEA,mBAEA,mBACA,WAEA,GACA,4DAGA,mBACA,MACA,YACA,GACA,oDAEA,oBACA,MACA,UACA,GACA,6DAEA,kBACA,MAEA,oBAEA,iCACA,kBACA,iBAGA,2BAEA,qCAKA,YA9JA,SA8JA,GACA,2BAGA,yBACA,wBACA,yBA6FA,WAjQA,WAuQA,IAJA,SAIA,mBACA,0CACA,mDACA,4CAGA,eAEA,2BAEA,oBACA,2BACA,+BAMA,WAzRA,SAyRA,GAEA,oBACA,gBACA,iBACA,cACA,cACA,cAEA,UAGA,SArSA,WAsSA,gBACA,kBACA,eACA,iBACA,mBAEA,mBAIA,WAhTA,WAiTA,kCAGA,WApTA,WAoTA,WACA,wBACA,uBACA,cACA,iBACA,MAGA,YA5TA,WA6TA,wBAGA,OAhUA,WAiUA,yBAGA,SApUA,SAoUA,cACA,OACA,kBACA,eACA,4BACA,eACA,mCACA,oBACA,mCACA,uBACA,IADA,eACA,GACA,gBACA,gBACA,gCACA,oBACA,OACA,mBACA,aACA,UACA,WACA,wBACA,gBAEA,uBAbA,oCAkBA,YAMA,WAtWA,SAsWA,gBACA,gCACA,QACA,gBACA,gCACA,oBACA,8CACA,UACA,WACA,IAEA,mBAEA,wBACA,yBACA,IAGA,8CACA,GACA,SAEA,uBACA,oBACA,IACA,IACA,QACA,SACA,oBACA,sCACA,WAEA,uBAGA,uCACA,KAEA,4BACA,6BACA,uCACA,cACA,8CAEA,yBAGA,sBAGA,SAGA,QAIA,eA/ZA,SA+ZA,GAIA,IAHA,cACA,WACA,IACA,cACA,sBACA,kBACA,sCACA,wBAGA,UAGA,YA7aA,WA8aA,iBACA,gBACA,kBACA,mBAEA,mBAIA,SAvbA,SAubA,GACA,qBAIA,cA5bA,WA6bA,qDACA,mBAIA,SAlcA,WAocA,GADA,kBACA,cAGA,sCACA,GACA,QAEA,iCACA,8BACA,uBACA,kBAGA,aAjdA,SAidA,cACA,gDAEA,qCAEA,IADA,qBACA,oBACA,WACA,aACA,yGAEA,MAFA,iCAIA,OADA,0BACA,OAKA,gFACA,UAIA,QAveA,SAueA,KACA,WACA,WACA,IACA,IAEA,OACA,YACA,KACA,KACA,qCACA,OACA,UACA,YACA,eACA,wGAEA,YAGA,eAEA,mBAIA,WAjgBA,SAigBA,GACA,wBACA,qBACA,sCAGA,YAvgBA,SAugBA,GACA,sBACA,sCACA,sBAGA,UA7gBA,SA6gBA,GACA,6CACA,wCACA,sBAEA,kBAlhBA,SAkhBA,GACA,sBAGA,iBAthBA,SAshBA,GACA,sBAGA,UA1hBA,SA0hBA,cACA,0BACA,IACA,gBACA,SACA,UACA,gBACA,SACA,WAEA,qBACA,2CAEA,qBAEA,WACA,uDACA,4DACA,mBACA,kDAEA,cAGA,IAFA,uEACA,KACA,YACA,yCAEA,8BAEA,aACA,cACA,WACA,eACA,YACA,UACA,UACA,gBACA,0BACA,uBAEA,qBACA,sDACA,oBACA,WACA,mBACA,OACA,SAEA,aACA,0BAGA,mBACA,aACA,cAIA,iBACA,sBAMA,QA3lBA,SA2lBA,GACA,gBACA,iBACA,sBACA,wBAIA,UAnmBA,SAmmBA,GACA,eACA,oBACA,6BACA,2BACA,sBAIA,WA5mBA,SA4mBA,GACA,qBAGA,sCACA,kDACA,qBACA,iBAIA,YAvnBA,SAunBA,cACA,kBACA,sBACA,oBACA,yCACA,mBACA,MAGA,YAhoBA,WAioBA,kBACA,sBACA,2BACA,iBACA,sBAGA,SAxoBA,SAwoBA,GACA,mBAGA,mBAEA,2CACA,iBACA,6BAEA,iBACA,8BAIA,SAvpBA,SAupBA,GACA,iBAGA,kBACA,sBACA,2BACA,uBAGA,UAjqBA,SAiqBA,GAEA,GADA,gCACA,cAeA,0BAfA,CACA,OACA,SACA,mBACA,wBAEA,iCACA,uBACA,eACA,eACA,iBACA,yBACA,kBAKA,kBAGA,YAvrBA,WAwrBA,kBACA,4BAEA,QA3rBA,e;;;;2DC3jBA,ozCAAswC,eAAG,G","file":"pagesB/HM-chat/HM-chat.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pagesB/HM-chat/HM-chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./HM-chat.vue?vue&type=template&id=6837bb2e&scoped=true&\"\nvar renderjs\nimport script from \"./HM-chat.vue?vue&type=script&lang=js&\"\nexport * from \"./HM-chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HM-chat.vue?vue&type=style&index=0&id=6837bb2e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6837bb2e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesB/HM-chat/HM-chat.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./HM-chat.vue?vue&type=template&id=6837bb2e&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./HM-chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./HM-chat.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<Canvas canvas-id='mycanvas' disable-scroll=\"true\" style=\"display: none;\"></Canvas>\r\n\t\t<view class=\"content\" @touchstart=\"hideDrawer\">\r\n\t\t\t<scroll-view class=\"msg-list\" scroll-y=\"true\" :scroll-with-animation=\"scrollAnimation\"\r\n\t\t\t\t:scroll-top=\"scrollTop\" :scroll-into-view=\"scrollToView\" @scrolltoupper=\"loadHistory\"\r\n\t\t\t\tupper-threshold=\"50\">\r\n\t\t\t\t<!-- 加载历史数据waitingUI -->\r\n\t\t\t\t<view class=\"loading\" v-if=\"isHistoryLoading\">\r\n\t\t\t\t\t<view class=\"spinner\">\r\n\t\t\t\t\t\t<view class=\"rect1\"></view> \r\n\t\t\t\t\t\t<view class=\"rect2\"></view>\r\n\t\t\t\t\t\t<view class=\"rect3\"></view>\r\n\t\t\t\t\t\t<view class=\"rect4\"></view>\r\n\t\t\t\t\t\t<view class=\"rect5\"></view> \r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"row\" v-for=\"(row,index) in msgList\" :key=\"index\" :id=\"'msg'+row.msg.id\">\r\n\t\t\t\t\t<!-- 系统消息 -->\r\n\t\t\t\t\t<block v-if=\"row.type=='system'\">\r\n\t\t\t\t\t\t<view class=\"system\">\r\n\t\t\t\t\t\t\t<!-- 文字消息 -->\r\n\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='text'\" class=\"text\">\r\n\t\t\t\t\t\t\t\t{{row.msg.content.text}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 用户消息 -->\r\n\t\t\t\t\t<block v-if=\"row.type=='user'\">\r\n\t\t\t\t\t\t<!-- 自己发出的消息 -->\r\n\t\t\t\t\t\t<view class=\"my\" v-if=\"row.msg.userinfo.uid==myuid\">\r\n\t\t\t\t\t\t\t<!-- 左-消息 -->\r\n\t\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t\t<!-- 文字消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='text'\" class=\"bubble\">\r\n\t\t\t\t\t\t\t\t\t<rich-text :nodes=\"row.msg.content.text\"></rich-text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 语言消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='voice'\" class=\"bubble voice\" @tap=\"playVoice(row.msg)\"\r\n\t\t\t\t\t\t\t\t\t:class=\"playMsgid == row.msg.id?'play':''\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"length\">{{row.msg.content.msg.length}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"icon my-voice\"></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 图片消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='img'\" class=\"bubble img\" @tap=\"showPic(row.msg)\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"row.msg.content.url\"\r\n\t\t\t\t\t\t\t\t\t\t:style=\"{'width': row.msg.content.w+'px','height': row.msg.content.h+'px'}\">\r\n\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 右-头像 -->\r\n\t\t\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t\t\t<image :src=\"row.msg.userinfo.face\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 别人发出的消息 -->\r\n\t\t\t\t\t\t<view class=\"other\" v-if=\"row.msg.userinfo.uid!=myuid\">\r\n\t\t\t\t\t\t\t<!-- 左-头像 -->\r\n\t\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t\t<image :src=\"row.msg.userinfo.face\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 右-用户名称-时间-消息 -->\r\n\t\t\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t\t\t<view class=\"username\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"name\">{{row.msg.userinfo.username}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"time\">{{row.msg.time}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 文字消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='text'\" class=\"bubble\">\r\n\t\t\t\t\t\t\t\t\t<rich-text :nodes=\"row.msg.content\"></rich-text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 语音消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='voice'\" class=\"bubble voice\" @tap=\"playVoice(row.msg)\"\r\n\t\t\t\t\t\t\t\t\t:class=\"playMsgid == row.msg.id?'play':''\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"icon other-voice\"></view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"length\">{{row.msg.content.msg.length}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 图片消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.msg.type=='img'\" class=\"bubble img\" @tap=\"showPic(row.msg)\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"row.msg.content.url\"\r\n\t\t\t\t\t\t\t\t\t\t:style=\"{'width': row.msg.content.w+'px','height': row.msg.content.h+'px'}\">\r\n\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view> \r\n\t\t</view>\r\n\t\t<!-- 抽屉栏 -->\r\n\t\t<view class=\"popup-layer\" :class=\"popupLayerClass\" @touchmove.stop.prevent=\"discard\">\r\n\t\t\t<!-- 表情 -->\r\n\t\t\t<swiper class=\"emoji-swiper\" :class=\"{hidden:hideEmoji}\" indicator-dots=\"true\" duration=\"150\">\r\n\t\t\t\t<swiper-item v-for=\"(page,pid) in emojiList\" :key=\"pid\">\r\n\t\t\t\t\t<view v-for=\"(em,eid) in page\" :key=\"eid\" @tap=\"addEmoji(em)\">\r\n\t\t\t\t\t\t<image mode=\"widthFix\" :src=\"'./pagesB/emoji/'+em.url\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t<!-- 更多功能 相册-拍照-红包 -->\r\n\t\t\t<view class=\"more-layer\" :class=\"{hidden:hideMore}\">\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<view class=\"box\" @tap=\"chooseImage\">\r\n\t\t\t\t\t\t<view class=\"icon tupian2\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"box\" @tap=\"camera\">\r\n\t\t\t\t\t\t<view class=\"icon paizhao\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <view class=\"box\" @tap=\"handRedEnvelopes\"><view class=\"icon hongbao\"></view></view> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 底部输入栏 -->\r\n\t\t<view class=\"input-box\" :class=\"popupLayerClass\" @touchmove.stop.prevent=\"discard\">\r\n\t\t\t<!-- H5下不能录音，输入栏布局改动一下 -->\r\n\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t<view class=\"voice\">\r\n\t\t\t\t<view class=\"icon\" :class=\"isVoice?'jianpan':'yuyin'\" @tap=\"switchVoice\"></view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t<view class=\"more\" @tap=\"showMore\">\r\n\t\t\t\t<view class=\"icon add\"></view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<view class=\"textbox\">\r\n\t\t\t\t<view class=\"voice-mode\" :class=\"[isVoice?'':'hidden',recording?'recording':'']\"\r\n\t\t\t\t\t@touchstart=\"voiceBegin\" @touchmove.stop.prevent=\"voiceIng\" @touchend=\"voiceEnd\"\r\n\t\t\t\t\t@touchcancel=\"voiceCancel\">{{voiceTis}}</view>\r\n\t\t\t\t<view class=\"text-mode\" :class=\"isVoice?'hidden':''\">\r\n\t\t\t\t\t<view class=\"box\">\r\n\t\t\t\t\t\t<textarea auto-height=\"true\" v-model=\"textMsg\" @focus=\"textareaFocus\" :show-confirm-bar='false'\r\n\t\t\t\t\t\t\tadjust-position />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"em\" @tap=\"chooseEmoji\">\r\n\t\t\t\t\t\t<view class=\"icon biaoqing\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t<view class=\"more\" @tap=\"showMore\">\r\n\t\t\t\t<view class=\"icon add\"></view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<view class=\"send\" :class=\"isVoice?'hidden':''\" @tap=\"sendText\">\r\n\t\t\t\t<view class=\"btn\">发送</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 录音UI效果 -->\r\n\t\t<view class=\"record\" :class=\"recording?'':'hidden'\">\r\n\t\t\t<view class=\"ing\" :class=\"willStop?'hidden':''\">\r\n\t\t\t\t<view class=\"icon luyin2\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cancel\" :class=\"willStop?'':'hidden'\">\r\n\t\t\t\t<view class=\"icon chehui\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tis\" :class=\"willStop?'change':''\">{{recordTis}}</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tgetPolicyPrivate,\r\n\t\tsignatureUrl\r\n\t} from \"API/OSS.js\"\r\n\timport {\r\n\t\tryToken\r\n\t} from 'API/rongyun.js'\r\n\timport {\r\n\t\tgetUid,\r\n\t\tgetName,\r\n\t\tgetUrl\r\n\t} from 'util/auth.js'\r\n\timport upng from 'util/UPNG.js'\r\n\timport { mapGetters } from 'vuex'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t//文字消息\r\n\t\t\t\ttextMsg: '',\r\n\t\t\t\t//消息列表\r\n\t\t\t\tisHistoryLoading: false,\r\n\t\t\t\tscrollAnimation: false,\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\tscrollToView: '',\r\n\t\t\t\tmsgList: [],\r\n\t\t\t\tmsgImgList: [],\r\n\t\t\t\tmyuid: 0,\r\n\t\t\t\t//录音相关参数\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\t//H5不能录音\r\n\t\t\t\tRECORDER: uni.getRecorderManager(),\r\n\t\t\t\t// #endif\r\n\t\t\t\tisVoice: false,\r\n\t\t\t\tvoiceTis: '按住 说话',\r\n\t\t\t\trecordTis: \"手指上滑 取消发送\",\r\n\t\t\t\trecording: false,\r\n\t\t\t\twillStop: false,\r\n\t\t\t\tinitPoint: {\r\n\t\t\t\t\tidentifier: 0,\r\n\t\t\t\t\tY: 0\r\n\t\t\t\t},\r\n\t\t\t\trecordTimer: null,\r\n\t\t\t\trecordLength: 0,\r\n\t\t\t\t//播放语音相关参数\r\n\t\t\t\tAUDIO: uni.createInnerAudioContext(),\r\n\t\t\t\tplayMsgid: null,\r\n\t\t\t\tVoiceTimer: null,\r\n\t\t\t\t// 抽屉参数\r\n\t\t\t\tpopupLayerClass: '',\r\n\t\t\t\t// more参数\r\n\t\t\t\thideMore: true,\r\n\t\t\t\t//表情定义\r\n\t\t\t\thideEmoji: true,\r\n\t\t\t\t//图片64位压缩编码\r\n\t\t\t\tmaterialList: [],\r\n\t\t\t\temojiList: [\r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\t\"url\": \"d_aini.png\",\r\n\t\t\t\t\t\talt: \"[爱你]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_aoteman.png\",\r\n\t\t\t\t\t\talt: \"[奥特曼]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_baibai.png\",\r\n\t\t\t\t\t\talt: \"[拜拜]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_beishang.png\",\r\n\t\t\t\t\t\talt: \"[悲伤]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_bishi.png\",\r\n\t\t\t\t\t\talt: \"[鄙视]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_bizui.png\",\r\n\t\t\t\t\t\talt: \"[闭嘴]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_chanzui.png\",\r\n\t\t\t\t\t\talt: \"[馋嘴]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_chijing.png\",\r\n\t\t\t\t\t\talt: \"[吃惊]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_dahaqi.png\",\r\n\t\t\t\t\t\talt: \"[哈欠]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_dalian.png\",\r\n\t\t\t\t\t\talt: \"[打脸]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_ding.png\",\r\n\t\t\t\t\t\talt: \"[顶]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_doge.png\",\r\n\t\t\t\t\t\talt: \"[doge]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_feizao.png\",\r\n\t\t\t\t\t\talt: \"[肥皂]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_ganmao.png\",\r\n\t\t\t\t\t\talt: \"[感冒]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_guzhang.png\",\r\n\t\t\t\t\t\talt: \"[鼓掌]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_haha.png\",\r\n\t\t\t\t\t\talt: \"[哈哈]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_haixiu.png\",\r\n\t\t\t\t\t\talt: \"[害羞]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_han.png\",\r\n\t\t\t\t\t\talt: \"[汗]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_hehe.png\",\r\n\t\t\t\t\t\talt: \"[微笑]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_heixian.png\",\r\n\t\t\t\t\t\talt: \"[黑线]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_heng.png\",\r\n\t\t\t\t\t\talt: \"[哼]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_huaxin.png\",\r\n\t\t\t\t\t\talt: \"[色]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_jiyan.png\",\r\n\t\t\t\t\t\talt: \"[挤眼]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_keai.png\",\r\n\t\t\t\t\t\talt: \"[可爱]\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\t\"url\": \"d_kelian.png\",\r\n\t\t\t\t\t\talt: \"[可怜]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_ku.png\",\r\n\t\t\t\t\t\talt: \"[酷]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_kun.png\",\r\n\t\t\t\t\t\talt: \"[困]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_landelini.png\",\r\n\t\t\t\t\t\talt: \"[白眼]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_lei.png\",\r\n\t\t\t\t\t\talt: \"[泪]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_madaochenggong.png\",\r\n\t\t\t\t\t\talt: \"[马到成功]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_miao.png\",\r\n\t\t\t\t\t\talt: \"[喵喵]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_nanhaier.png\",\r\n\t\t\t\t\t\talt: \"[男孩儿]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_nu.png\",\r\n\t\t\t\t\t\talt: \"[怒]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_numa.png\",\r\n\t\t\t\t\t\talt: \"[怒骂]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_nvhaier.png\",\r\n\t\t\t\t\t\talt: \"[女孩儿]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_qian.png\",\r\n\t\t\t\t\t\talt: \"[钱]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_qinqin.png\",\r\n\t\t\t\t\t\talt: \"[亲亲]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_shayan.png\",\r\n\t\t\t\t\t\talt: \"[傻眼]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_shengbing.png\",\r\n\t\t\t\t\t\talt: \"[生病]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_shenshou.png\",\r\n\t\t\t\t\t\talt: \"[草泥马]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_shiwang.png\",\r\n\t\t\t\t\t\talt: \"[失望]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_shuai.png\",\r\n\t\t\t\t\t\talt: \"[衰]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_shuijiao.png\",\r\n\t\t\t\t\t\talt: \"[睡]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_sikao.png\",\r\n\t\t\t\t\t\talt: \"[思考]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_taikaixin.png\",\r\n\t\t\t\t\t\talt: \"[太开心]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_touxiao.png\",\r\n\t\t\t\t\t\talt: \"[偷笑]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_tu.png\",\r\n\t\t\t\t\t\talt: \"[吐]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_tuzi.png\",\r\n\t\t\t\t\t\talt: \"[兔子]\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\t\"url\": \"d_wabishi.png\",\r\n\t\t\t\t\t\talt: \"[挖鼻]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_weiqu.png\",\r\n\t\t\t\t\t\talt: \"[委屈]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_xiaoku.png\",\r\n\t\t\t\t\t\talt: \"[笑cry]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_xiongmao.png\",\r\n\t\t\t\t\t\talt: \"[熊猫]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_xixi.png\",\r\n\t\t\t\t\t\talt: \"[嘻嘻]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_xu.png\",\r\n\t\t\t\t\t\talt: \"[嘘]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_yinxian.png\",\r\n\t\t\t\t\t\talt: \"[阴险]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_yiwen.png\",\r\n\t\t\t\t\t\talt: \"[疑问]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_youhengheng.png\",\r\n\t\t\t\t\t\talt: \"[右哼哼]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_yun.png\",\r\n\t\t\t\t\t\talt: \"[晕]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_zhajipijiu.png\",\r\n\t\t\t\t\t\talt: \"[炸鸡啤酒]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_zhuakuang.png\",\r\n\t\t\t\t\t\talt: \"[抓狂]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_zhutou.png\",\r\n\t\t\t\t\t\talt: \"[猪头]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_zuiyou.png\",\r\n\t\t\t\t\t\talt: \"[最右]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"d_zuohengheng.png\",\r\n\t\t\t\t\t\talt: \"[左哼哼]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"f_geili.png\",\r\n\t\t\t\t\t\talt: \"[给力]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"f_hufen.png\",\r\n\t\t\t\t\t\talt: \"[互粉]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"f_jiong.png\",\r\n\t\t\t\t\t\talt: \"[囧]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"f_meng.png\",\r\n\t\t\t\t\t\talt: \"[萌]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"f_shenma.png\",\r\n\t\t\t\t\t\talt: \"[神马]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"f_v5.png\",\r\n\t\t\t\t\t\talt: \"[威武]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"f_xi.png\",\r\n\t\t\t\t\t\talt: \"[喜]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"f_zhi.png\",\r\n\t\t\t\t\t\talt: \"[织]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"h_buyao.png\",\r\n\t\t\t\t\t\talt: \"[NO]\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\t\"url\": \"h_good.png\",\r\n\t\t\t\t\t\talt: \"[good]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"h_haha.png\",\r\n\t\t\t\t\t\talt: \"[haha]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"h_lai.png\",\r\n\t\t\t\t\t\talt: \"[来]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"h_ok.png\",\r\n\t\t\t\t\t\talt: \"[OK]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"h_quantou.png\",\r\n\t\t\t\t\t\talt: \"[拳头]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"h_ruo.png\",\r\n\t\t\t\t\t\talt: \"[弱]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"h_woshou.png\",\r\n\t\t\t\t\t\talt: \"[握手]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"h_ye.png\",\r\n\t\t\t\t\t\talt: \"[耶]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"h_zan.png\",\r\n\t\t\t\t\t\talt: \"[赞]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"h_zuoyi.png\",\r\n\t\t\t\t\t\talt: \"[作揖]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"l_shangxin.png\",\r\n\t\t\t\t\t\talt: \"[伤心]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"l_xin.png\",\r\n\t\t\t\t\t\talt: \"[心]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_dangao.png\",\r\n\t\t\t\t\t\talt: \"[蛋糕]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_feiji.png\",\r\n\t\t\t\t\t\talt: \"[飞机]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_ganbei.png\",\r\n\t\t\t\t\t\talt: \"[干杯]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_huatong.png\",\r\n\t\t\t\t\t\talt: \"[话筒]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_lazhu.png\",\r\n\t\t\t\t\t\talt: \"[蜡烛]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_liwu.png\",\r\n\t\t\t\t\t\talt: \"[礼物]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_lvsidai.png\",\r\n\t\t\t\t\t\talt: \"[绿丝带]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_weibo.png\",\r\n\t\t\t\t\t\talt: \"[围脖]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_weiguan.png\",\r\n\t\t\t\t\t\talt: \"[围观]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_yinyue.png\",\r\n\t\t\t\t\t\talt: \"[音乐]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_zhaoxiangji.png\",\r\n\t\t\t\t\t\talt: \"[照相机]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"o_zhong.png\",\r\n\t\t\t\t\t\talt: \"[钟]\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\t\"url\": \"w_fuyun.png\",\r\n\t\t\t\t\t\talt: \"[浮云]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"w_shachenbao.png\",\r\n\t\t\t\t\t\talt: \"[沙尘暴]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"w_taiyang.png\",\r\n\t\t\t\t\t\talt: \"[太阳]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"w_weifeng.png\",\r\n\t\t\t\t\t\talt: \"[微风]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"w_xianhua.png\",\r\n\t\t\t\t\t\talt: \"[鲜花]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"w_xiayu.png\",\r\n\t\t\t\t\t\talt: \"[下雨]\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\"url\": \"w_yueliang.png\",\r\n\t\t\t\t\t\talt: \"[月亮]\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t],\r\n\t\t\t\t//发送文字时给融云传的值\r\n\t\t\t\treplacedStr: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.myuid = getUid()\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tthis.getMsgList();\r\n\t\t\t//语音自然播放结束\r\n\t\t\tthis.AUDIO.onEnded((res) => {\r\n\t\t\t\tthis.playMsgid = null;\r\n\t\t\t});\r\n\t\t\t// #ifndef H5\r\n\t\t\t//录音开始事件\r\n\t\t\tthis.RECORDER.onStart((e) => {\r\n\t\t\t\tthis.recordBegin(e);\r\n\t\t\t})\r\n\t\t\t//录音结束事件\r\n\t\t\tthis.RECORDER.onStop((e) => {\r\n\t\t\t\tthis.recordEnd(e);\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.scrollTop = 9999999;\r\n\t\t},\r\n\t\t//监听融云消息\r\n\t\twatch:{\r\n\t\t\tryNewState(){\r\n\t\t\t\tlet that = this\r\n\t\t\t\tif(this.ryNewState != null){\r\n\t\t\t\t\tthis.messageType(this.ryNewState)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapGetters(['ryNewState'])\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//判断监听得来的消息类型\r\n\t\t\tmessageType(latestConversationList){\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet nowDate = new Date()\r\n\t\t\t\tlet newMessage = latestConversationList[0]\r\n\t\t\t\tlet typelei = ''\r\n\t\t\t\tlet msg = {}\r\n\t\t\t\tif (newMessage.latestMessage.messageType == 'RC:TxtMsg') {\r\n\t\t\t\t\tlet txt = that.replaceEmoji(newMessage.latestMessage.content.content)\r\n\t\t\t\t\tconsole.log(txt, '监听得到的经表情函数处理后的消息')\r\n\t\t\t\t\ttypelei = 'text'\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\ttype: 'user',\r\n\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\tid: newMessage.unreadMessageCount,\r\n\t\t\t\t\t\t\ttime: nowDate.getHours() + \":\" + nowDate.getMinutes(),\r\n\t\t\t\t\t\t\ttype: typelei,\r\n\t\t\t\t\t\t\tuserinfo: {\r\n\t\t\t\t\t\t\t\tuid: newMessage.latestMessage.senderUserId,\r\n\t\t\t\t\t\t\t\tusername: \"医生019号\",\r\n\t\t\t\t\t\t\t\tface: \"https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3918800978,3848407993&fm=26&gp=0.jpg\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcontent: txt\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (newMessage.latestMessage.messageType == 'RC:HQVCMsg') {\r\n\t\t\t\t\ttypelei = 'voice'\r\n\t\t\t\t\tlet min = parseInt(newMessage.latestMessage.content.duration / 60);\r\n\t\t\t\t\tlet sec = newMessage.latestMessage.content.duration % 60;\r\n\t\t\t\t\tmin = min < 10 ? '0' + min : min;\r\n\t\t\t\t\tsec = sec < 10 ? '0' + sec : sec;\r\n\t\t\t\t\tlet msglength = min + ':' + sec;\r\n\t\t\t\t\r\n\t\t\t\t\tmsg = {\r\n\t\t\t\t\t\ttype: 'user',\r\n\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\tid: newMessage.unreadMessageCount,\r\n\t\t\t\t\t\t\ttime: nowDate.getHours() + \":\" + nowDate.getMinutes(),\r\n\t\t\t\t\t\t\ttype: typelei,\r\n\t\t\t\t\t\t\tuserinfo: {\r\n\t\t\t\t\t\t\t\tuid: newMessage.latestMessage.senderUserId,\r\n\t\t\t\t\t\t\t\tusername: \"医生019号\",\r\n\t\t\t\t\t\t\t\tface: \"https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3918800978,3848407993&fm=26&gp=0.jpg\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcontent: {\r\n\t\t\t\t\t\t\t\turl: newMessage.latestMessage.content.remoteUrl,\r\n\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\tlength: msglength\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(msg, '监听得到的语音')\r\n\t\t\t\t} else if (newMessage.latestMessage.messageType == 'RC:ImgMsg') {\r\n\t\t\t\t\ttypelei = 'img'\r\n\t\t\t\t\tconsole.log(newMessage.latestMessage, '监听得到的图片')\r\n\t\t\t\t}\r\n\t\t\t\tif (newMessage.latestMessage.messageDirection == 2) {\r\n\t\t\t\t\tthat.screenMsg(msg, true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//通过融云发送消息\r\n\t\t\tsendmessageByRy(content, type) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\t// 获取指定会话的抽象实例，对于会话的操作基于此实例完成\r\n\t\t\t\tconst conversation = this.$im.Conversation.get({\r\n\t\t\t\t\t// targetId\r\n\t\t\t\t\ttargetId: '19',\r\n\t\t\t\t\t// 会话类型：RongIMLib.CONVERSATION_TYPE.PRIVATE | RongIMLib.CONVERSATION_TYPE.GROUP\r\n\t\t\t\t\ttype: this.$ry.CONVERSATION_TYPE.PRIVATE\r\n\t\t\t\t});\r\n\t\t\t\tif (type == this.$ry.MESSAGE_TYPE.TEXT) {\r\n\t\t\t\t\tconversation.send({\r\n\t\t\t\t\t\tmessageType: type,\r\n\t\t\t\t\t\tcontent: {\r\n\t\t\t\t\t\t\tcontent: that.replacedStr\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(function(message) {\r\n\t\t\t\t\t\tconsole.log('发送消息成功', message);\r\n\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\tconsole.log('发送消息失败', error.code, error.msg);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (type == this.$ry.MESSAGE_TYPE.HQ_VOICE) {\r\n\t\t\t\t\tconsole.log(content, 'viocery')\r\n\t\t\t\t\tconversation.send({\r\n\t\t\t\t\t\tmessageType: type, // 'RC:HQVCMsg'\r\n\t\t\t\t\t\tcontent: {\r\n\t\t\t\t\t\t\tremoteUrl: content.msg.content.url, // 音频 url, 建议格式: aac\r\n\t\t\t\t\t\t\tduration: content.msg.content.msg.time, // 音频时长\r\n\t\t\t\t\t\t\ttype: 'aac'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(function(message) {\r\n\t\t\t\t\t\tconsole.log('发送语音消息成功', message);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (type == this.$ry.MESSAGE_TYPE.IMAGE) {\r\n\t\t\t\t\tconsole.log(content, '666666')\r\n\t\t\t\t\tconversation.send({\r\n\t\t\t\t\t\tmessageType: type, // 'RC:ImgMsg'\r\n\t\t\t\t\t\tcontent: {\r\n\t\t\t\t\t\t\tcontent: content.base64_path, // // 压缩后的 base64 略缩图, 用来快速展示图片\r\n\t\t\t\t\t\t\timageUri: content.url // 上传到服务器的 url. 用来展示高清图片\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(function(message) {\r\n\t\t\t\t\t\tconsole.log('发送图片消息成功', message);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t// 接受消息(筛选处理)\r\n\t\t\tscreenMsg(msg, watch = false) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\t//筛选处理\r\n\t\t\t\tif (msg.type == 'system') {\r\n\t\t\t\t\t// 系统消息\r\n\t\t\t\t\tswitch (msg.msg.type) {\r\n\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\t\tthis.addSystemTextMsg(msg);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (msg.type == 'user') {\r\n\t\t\t\t\t// 用户消息\r\n\t\t\t\t\tswitch (msg.msg.type) {\r\n\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\t\t// console.log(watch,'watch')\r\n\t\t\t\t\t\t\tif (!watch) {\r\n\t\t\t\t\t\t\t\tthis.sendmessageByRy(msg.msg.content, that.$ry.MESSAGE_TYPE.TEXT)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// console.log(msg)\r\n\t\t\t\t\t\t\tthis.addTextMsg(msg);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'voice':\r\n\t\t\t\t\t\t\tif (!watch) {\r\n\t\t\t\t\t\t\t\tthis.sendmessageByRy(msg, that.$ry.MESSAGE_TYPE.HQ_VOICE)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.addVoiceMsg(msg);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'img':\r\n\t\t\t\t\t\t\tif (!watch) {\r\n\t\t\t\t\t\t\t\tthis.sendmessageByRy(msg.msg.content, that.$ry.MESSAGE_TYPE.IMAGE)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.addImgMsg(msg);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log('用户消息');\r\n\t\t\t\t\t//非自己的消息震动\r\n\t\t\t\t\tif (msg.msg.userinfo.uid != this.myuid) {\r\n\t\t\t\t\t\tconsole.log('振动');\r\n\t\t\t\t\t\tuni.vibrateLong();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t// 滚动到底\r\n\t\t\t\t\tthis.scrollToView = 'msg' + msg.msg.id\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//触发滑动到顶部(加载历史信息记录)\r\n\t\t\tloadHistory(e) {\r\n\t\t\t\tif (this.isHistoryLoading) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.isHistoryLoading = true; //参数作为进入请求标识，防止重复请求\r\n\t\t\t\tthis.scrollAnimation = false; //关闭滑动动画\r\n\t\t\t\tlet Viewid = this.msgList[0].msg.id; //记住第一个信息ID\r\n\t\t\t\t//本地模拟请求历史记录效果\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t// \t// 消息列表\r\n\t\t\t\t// \tlet list = [{\r\n\t\t\t\t// \t\t\ttype: \"user\",\r\n\t\t\t\t// \t\t\tmsg: {\r\n\t\t\t\t// \t\t\t\tid: 1,\r\n\t\t\t\t// \t\t\t\ttype: \"text\",\r\n\t\t\t\t// \t\t\t\ttime: \"12:56\",\r\n\t\t\t\t// \t\t\t\tuserinfo: {\r\n\t\t\t\t// \t\t\t\t\tuid: 0,\r\n\t\t\t\t// \t\t\t\t\tusername: \"大黑哥\",\r\n\t\t\t\t// \t\t\t\t\tface: \"/static/img/face.jpg\"\r\n\t\t\t\t// \t\t\t\t},\r\n\t\t\t\t// \t\t\t\tcontent: {\r\n\t\t\t\t// \t\t\t\t\ttext: \"为什么温度会相差那么大？\"\r\n\t\t\t\t// \t\t\t\t}\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t\t{\r\n\t\t\t\t// \t\t\ttype: \"user\",\r\n\t\t\t\t// \t\t\tmsg: {\r\n\t\t\t\t// \t\t\t\tid: 2,\r\n\t\t\t\t// \t\t\t\ttype: \"text\",\r\n\t\t\t\t// \t\t\t\ttime: \"12:57\",\r\n\t\t\t\t// \t\t\t\tuserinfo: {\r\n\t\t\t\t// \t\t\t\t\tuid: 1,\r\n\t\t\t\t// \t\t\t\t\tusername: \"售后客服008\",\r\n\t\t\t\t// \t\t\t\t\tface: \"/static/img/im/face/face_2.jpg\"\r\n\t\t\t\t// \t\t\t\t},\r\n\t\t\t\t// \t\t\t\tcontent: {\r\n\t\t\t\t// \t\t\t\t\ttext: \"这个是有偏差的，两个温度相差十几二十度是很正常的，如果相差五十度，那即是质量问题了。\"\r\n\t\t\t\t// \t\t\t\t}\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t\t{\r\n\t\t\t\t// \t\t\ttype: \"user\",\r\n\t\t\t\t// \t\t\tmsg: {\r\n\t\t\t\t// \t\t\t\tid: 3,\r\n\t\t\t\t// \t\t\t\ttype: \"voice\",\r\n\t\t\t\t// \t\t\t\ttime: \"12:59\",\r\n\t\t\t\t// \t\t\t\tuserinfo: {\r\n\t\t\t\t// \t\t\t\t\tuid: 1,\r\n\t\t\t\t// \t\t\t\t\tusername: \"售后客服008\",\r\n\t\t\t\t// \t\t\t\t\tface: \"/static/img/im/face/face_2.jpg\"\r\n\t\t\t\t// \t\t\t\t},\r\n\t\t\t\t// \t\t\t\tcontent: {\r\n\t\t\t\t// \t\t\t\t\turl: \"/static/voice/1.mp3\",\r\n\t\t\t\t// \t\t\t\t\tlength: \"00:06\"\r\n\t\t\t\t// \t\t\t\t}\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t\t{\r\n\t\t\t\t// \t\t\ttype: \"user\",\r\n\t\t\t\t// \t\t\tmsg: {\r\n\t\t\t\t// \t\t\t\tid: 4,\r\n\t\t\t\t// \t\t\t\ttype: \"voice\",\r\n\t\t\t\t// \t\t\t\ttime: \"13:05\",\r\n\t\t\t\t// \t\t\t\tuserinfo: {\r\n\t\t\t\t// \t\t\t\t\tuid: 0,\r\n\t\t\t\t// \t\t\t\t\tusername: \"大黑哥\",\r\n\t\t\t\t// \t\t\t\t\tface: \"/static/img/face.jpg\"\r\n\t\t\t\t// \t\t\t\t},\r\n\t\t\t\t// \t\t\t\tcontent: {\r\n\t\t\t\t// \t\t\t\t\turl: \"/static/voice/2.mp3\",\r\n\t\t\t\t// \t\t\t\t\tlength: \"00:06\"\r\n\t\t\t\t// \t\t\t\t}\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t]\r\n\t\t\t\t// \t// 获取消息中的图片,并处理显示尺寸\r\n\t\t\t\t// \tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t// \t\tif (list[i].type == 'user' && list[i].msg.type == \"img\") {\r\n\t\t\t\t// \t\t\tlist[i].msg.content = this.setPicSize(list[i].msg.content);\r\n\t\t\t\t// \t\t\tthis.msgImgList.unshift(list[i].msg.content.url);\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t\tlist[i].msg.id = Math.floor(Math.random() * 1000 + 1);\r\n\t\t\t\t// \t\tthis.msgList.unshift(list[i]);\r\n\t\t\t\t// \t}\r\n\r\n\t\t\t\t// \t//这段代码很重要，不然每次加载历史数据都会跳到顶部\r\n\t\t\t\t// \tthis.$nextTick(function() {\r\n\t\t\t\t// \t\tthis.scrollToView = 'msg' + Viewid; //跳转上次的第一行信息位置\r\n\t\t\t\t// \t\tthis.$nextTick(function() {\r\n\t\t\t\t// \t\t\tthis.scrollAnimation = true; //恢复滚动动画\r\n\t\t\t\t// \t\t});\r\n\t\t\t\t// \t});\r\n\t\t\t\t// \tthis.isHistoryLoading = false;\r\n\r\n\t\t\t\t// }, 1000)\r\n\t\t\t},\r\n\t\t\t// 加载初始页面消息\r\n\t\t\tgetMsgList() {\r\n\t\t\t\t// 消息列表\r\n\t\t\t\tlet list = [\r\n\r\n\t\t\t\t]\r\n\t\t\t\t// 获取消息中的图片,并处理显示尺寸\r\n\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\tif (list[i].type == 'user' && list[i].msg.type == \"img\") {\r\n\t\t\t\t\t\tlist[i].msg.content = this.setPicSize(list[i].msg.content);\r\n\t\t\t\t\t\tthis.msgImgList.push(list[i].msg.content.url);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.msgList = list;\r\n\t\t\t\t// 滚动到底部\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t//进入页面滚动到底部\r\n\t\t\t\t\tthis.scrollTop = 9999;\r\n\t\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t\tthis.scrollAnimation = true;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//处理图片尺寸，如果不处理宽高，新进入页面加载图片时候会闪\r\n\t\t\tsetPicSize(content) {\r\n\t\t\t\t// 让图片最长边等于设置的最大长度，短边等比例缩小，图片控件真实改变，区别于aspectFit方式。\r\n\t\t\t\tlet maxW = uni.upx2px(350); //350是定义消息图片最大宽度\r\n\t\t\t\tlet maxH = uni.upx2px(350); //350是定义消息图片最大高度\r\n\t\t\t\tif (content.w > maxW || content.h > maxH) {\r\n\t\t\t\t\tlet scale = content.w / content.h;\r\n\t\t\t\t\tcontent.w = scale > 1 ? maxW : maxH * scale;\r\n\t\t\t\t\tcontent.h = scale > 1 ? maxW / scale : maxH;\r\n\t\t\t\t}\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\t//更多功能(点击+弹出) \r\n\t\t\tshowMore() {\r\n\t\t\t\tthis.isVoice = false;\r\n\t\t\t\tthis.hideEmoji = true;\r\n\t\t\t\tif (this.hideMore) {\r\n\t\t\t\t\tthis.hideMore = false;\r\n\t\t\t\t\tthis.openDrawer();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.hideDrawer();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 打开抽屉\r\n\t\t\topenDrawer() {\r\n\t\t\t\tthis.popupLayerClass = 'showLayer';\r\n\t\t\t},\r\n\t\t\t// 隐藏抽屉\r\n\t\t\thideDrawer() {\r\n\t\t\t\tthis.popupLayerClass = '';\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.hideMore = true;\r\n\t\t\t\t\tthis.hideEmoji = true;\r\n\t\t\t\t}, 150);\r\n\t\t\t},\r\n\t\t\t// 选择图片发送\r\n\t\t\tchooseImage() {\r\n\t\t\t\tthis.getMedia('album');\r\n\t\t\t},\r\n\t\t\t//拍照发送\r\n\t\t\tcamera() {\r\n\t\t\t\tthis.getMedia('camera');\r\n\t\t\t},\r\n\t\t\t//选照片/视频 or 拍照/视频\r\n\t\t\tgetMedia(type) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tthis.hideDrawer();\r\n\t\t\t\tuni.chooseMedia({\r\n\t\t\t\t\tmediaType: ['image', 'video'],\r\n\t\t\t\t\tsourceType: [type],\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthat.weixin_img(0, res).then(() => {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < res.tempFiles.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (res.tempFiles[i]) {\r\n\t\t\t\t\t\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\t\t\t\t\t\tsrc: res.tempFiles[i].tempFilePath,\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: (image) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet msg = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: res.tempFiles[i]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.tempFilePath,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tw: res.width,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\th: res.height,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbase64_path: res.tempFiles[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ti].Base64_Path\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.sendMsg(msg, 'img');\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 100)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//微信压缩\r\n\t\t\tweixin_img(num, rem) {\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\tlet that = this\r\n\t\t\t\t\tuni.getImageInfo({ //获取这个图片 图片压缩\r\n\t\t\t\t\t\tsrc: rem.tempFiles[num].tempFilePath, //需要获取的图片 图片选择不用我说了吧\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tvar ctx = wx.createCanvasContext('mycanvas', this); //使用一个canvas\r\n\t\t\t\t\t\t\tvar canvasWidth = res.width //原图宽度 \r\n\t\t\t\t\t\t\tvar canvasHeight = res.height; //原图高度\r\n\t\t\t\t\t\t\tvar ratio = 2;\r\n\t\t\t\t\t\t\t// 保证宽高均在200以内\r\n\t\t\t\t\t\t\twhile (canvasWidth > 200 || canvasHeight > 200) {\r\n\t\t\t\t\t\t\t\t//比例取整\r\n\t\t\t\t\t\t\t\tcanvasWidth = Math.trunc(res.width / ratio)\r\n\t\t\t\t\t\t\t\tcanvasHeight = Math.trunc(res.height / ratio)\r\n\t\t\t\t\t\t\t\tratio++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// 绘制新图\r\n\t\t\t\t\t\t\tctx.drawImage(rem.tempFiles[num].tempFilePath, 0, 0, canvasWidth,\r\n\t\t\t\t\t\t\t\tcanvasHeight)\r\n\t\t\t\t\t\t\tctx.draw()\r\n\t\t\t\t\t\t\t//获取图像数据， API 1.9.0\r\n\t\t\t\t\t\t\twx.canvasGetImageData({\r\n\t\t\t\t\t\t\t\tcanvasId: 'mycanvas',\r\n\t\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\t\t\twidth: canvasWidth,\r\n\t\t\t\t\t\t\t\theight: canvasHeight,\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tlet platform = wx.getSystemInfoSync().platform\r\n\t\t\t\t\t\t\t\t\tif (platform == 'ios') {\r\n\t\t\t\t\t\t\t\t\t\t// 兼容处理：ios获取的图片上下颠倒\r\n\t\t\t\t\t\t\t\t\t\tres = that.reverseImgData(res)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// 3. png编码\r\n\t\t\t\t\t\t\t\t\tlet pngData = upng.encode([res.data.buffer],\r\n\t\t\t\t\t\t\t\t\t\tcanvasWidth, canvasHeight)\r\n\t\t\t\t\t\t\t\t\t// 4. base64编码\r\n\t\t\t\t\t\t\t\t\tlet base64 = wx.arrayBufferToBase64(pngData)\r\n\t\t\t\t\t\t\t\t\trem.tempFiles[num].Base64_Path = base64\r\n\t\t\t\t\t\t\t\t\tthat.materialList = that.materialList.concat(rem\r\n\t\t\t\t\t\t\t\t\t\t.tempFiles[num]);\r\n\t\t\t\t\t\t\t\t\tconsole.log(rem.tempFiles[num].Base64_Path, 'wcl')\r\n\t\t\t\t\t\t\t\t\t//利用递归循环来实现多张图片压缩\r\n\t\t\t\t\t\t\t\t\tif (num == rem.tempFiles.length - 1) {\r\n\t\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthat.weixin_img(num + 1, rem)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t}, this)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 兼容处理：ios获取的图片上下颠倒\r\n\t\t\treverseImgData(res) {\r\n\t\t\t\tvar w = res.width\r\n\t\t\t\tvar h = res.height\r\n\t\t\t\tlet con = 0\r\n\t\t\t\tfor (var i = 0; i < h / 2; i++) {\r\n\t\t\t\t\tfor (var j = 0; j < w * 4; j++) {\r\n\t\t\t\t\t\tcon = res.data[i * w * 4 + j]\r\n\t\t\t\t\t\tres.data[i * w * 4 + j] = res.data[(h - i - 1) * w * 4 + j]\r\n\t\t\t\t\t\tres.data[(h - i - 1) * w * 4 + j] = con\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn res\r\n\t\t\t},\r\n\t\t\t// 选择表情\r\n\t\t\tchooseEmoji() {\r\n\t\t\t\tthis.hideMore = true;\r\n\t\t\t\tif (this.hideEmoji) {\r\n\t\t\t\t\tthis.hideEmoji = false;\r\n\t\t\t\t\tthis.openDrawer();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.hideDrawer();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//添加表情\r\n\t\t\taddEmoji(em) {\r\n\t\t\t\tthis.textMsg += em.alt;\r\n\t\t\t},\r\n\r\n\t\t\t//获取焦点，如果不是选表情ing,则关闭抽屉\r\n\t\t\ttextareaFocus() {\r\n\t\t\t\tif (this.popupLayerClass == 'showLayer' && this.hideMore == false) {\r\n\t\t\t\t\tthis.hideDrawer();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 发送文字消息\r\n\t\t\tsendText() {\r\n\t\t\t\tthis.hideDrawer(); //隐藏抽屉\r\n\t\t\t\tif (!this.textMsg) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet content = this.replaceEmoji(this.textMsg);\r\n\t\t\t\tlet msg = {\r\n\t\t\t\t\ttext: content\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(this.textMsg, '5255')\r\n\t\t\t\tthis.replacedStr = this.textMsg\r\n\t\t\t\tthis.sendMsg(msg, 'text');\r\n\t\t\t\tthis.textMsg = ''; //清空输入框\r\n\t\t\t},\r\n\t\t\t//替换表情符号为图片\r\n\t\t\treplaceEmoji(str) {\r\n\t\t\t\tlet replacedStr = str.replace(/\\[([^(\\]|\\[)]*)\\]/g, (item, index) => {\r\n\t\t\t\t\t// console.log(\"item: \" + item);\r\n\t\t\t\t\tfor (let i = 0; i < this.emojiList.length; i++) {\r\n\t\t\t\t\t\tlet row = this.emojiList[i];\r\n\t\t\t\t\t\tfor (let j = 0; j < row.length; j++) {\r\n\t\t\t\t\t\t\tlet EM = row[j];\r\n\t\t\t\t\t\t\tif (EM.alt == item) {\r\n\t\t\t\t\t\t\t\tlet imgstr = '<img src=\"' +\r\n\t\t\t\t\t\t\t\t\t'https://kz-open-resources.oss-cn-beijing.aliyuncs.com/tcell/images/InternetmemeImages/' +\r\n\t\t\t\t\t\t\t\t\tEM.url + '\" ' + 'width=\"' + '32px\"' + ' height=\"' + '32px\"' + '/>';\r\n\t\t\t\t\t\t\t\tconsole.log(\"imgstr: \" + imgstr);\r\n\t\t\t\t\t\t\t\treturn imgstr;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn '<div style=\"display: flex;align-items: center;word-wrap:break-word;\">' + replacedStr +\r\n\t\t\t\t\t'</div>';\r\n\t\t\t},\r\n\r\n\t\t\t// 发送消息\r\n\t\t\tsendMsg(content, type) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tvar nowDate = new Date();\r\n\t\t\t\tlet lastid = 0;\r\n\t\t\t\tlastid++;\r\n\t\t\t\t// console.log(content)\r\n\t\t\t\tlet msg = {\r\n\t\t\t\t\ttype: 'user',\r\n\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\tid: lastid,\r\n\t\t\t\t\t\ttime: nowDate.getHours() + \":\" + nowDate.getMinutes(),\r\n\t\t\t\t\t\ttype: type,\r\n\t\t\t\t\t\tuserinfo: {\r\n\t\t\t\t\t\t\tuid: that.myuid,\r\n\t\t\t\t\t\t\tusername: \"大黑哥\",\r\n\t\t\t\t\t\t\tface: \"https://dss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2146034403,1504718527&fm=26&gp=0.jpg\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcontent: content\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(msg)\r\n\t\t\t\t// 发送消息\r\n\t\t\t\tthis.screenMsg(msg);\r\n\t\t\t},\r\n\r\n\t\t\t// 添加文字消息到列表\r\n\t\t\taddTextMsg(msg) {\r\n\t\t\t\tconsole.log(msg, '新增加的消息')\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t\tconsole.log(this.msgList, '增加后的消息总表')\r\n\t\t\t},\r\n\t\t\t// 添加语音消息到列表\r\n\t\t\taddVoiceMsg(msg) {\r\n\t\t\t\tconsole.log(msg, '语音消息')\r\n\t\t\t\tconsole.log(msg.msg.content.url, 'ssss')\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t},\r\n\t\t\t// 添加图片消息到列表\r\n\t\t\taddImgMsg(msg) {\r\n\t\t\t\tmsg.msg.content = this.setPicSize(msg.msg.content);\r\n\t\t\t\tthis.msgImgList.push(msg.msg.content.url);\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t},\r\n\t\t\taddRedEnvelopeMsg(msg) {\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t},\r\n\t\t\t// 添加系统文字消息到列表\r\n\t\t\taddSystemTextMsg(msg) {\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t},\r\n\t\t\t//上传图片/音频OSS\r\n\t\t\tuploadOss(msg) {\r\n\t\t\t\tconsole.log(msg.url, 'path')\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet reg = RegExp(/mp3/)\r\n\t\t\t\tlet format = '.jpg'\r\n\t\t\t\tlet location = 'image'\r\n\t\t\t\tif (reg.test(msg.url)) {\r\n\t\t\t\t\tformat = '.mp3'\r\n\t\t\t\t\tlocation = 'audio'\r\n\t\t\t\t}\r\n\t\t\t\tlet position = 'chat/' + location + '/'\r\n\t\t\t\tgetPolicyPrivate(position).then((res) => {\r\n\t\t\t\t\t// 向后台发请求 拉取OSS相关配置\r\n\t\t\t\t\tconst creds = res[1].data.data;\r\n\t\t\t\t\t//随机数\r\n\t\t\t\t\tlet date = new Date()\r\n\t\t\t\t\tlet d = date.getFullYear() + '-' + ((date.getMonth() + 1) > 9 ? (date.getMonth() + 1) : (\r\n\t\t\t\t\t\t\t'0' + (date.getMonth() + 1))) + '/patientVioce--' + date.getDate() + 'day' + date\r\n\t\t\t\t\t\t.getHours() + 'hours' +\r\n\t\t\t\t\t\tdate.getMinutes() + 'minutes' + date.getSeconds() + 'seconds'\r\n\r\n\t\t\t\t\tfunction randomString(length) {\r\n\t\t\t\t\t\tvar str = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\r\n\t\t\t\t\t\tvar result = \"\";\r\n\t\t\t\t\t\tfor (var i = length; i > 0; --i) {\r\n\t\t\t\t\t\t\tresult += str[Math.floor(Math.random() * str.length)];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn result + (new Date()).valueOf();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst SJS = d + randomString(6);\r\n\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\turl: creds.host, // 开发者服务器的URL。\r\n\t\t\t\t\t\tfilePath: msg.url,\r\n\t\t\t\t\t\tname: 'file', // 必须填file。\t\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\tkey: position + SJS + format,\r\n\t\t\t\t\t\t\tpolicy: creds.policy,\r\n\t\t\t\t\t\t\tOSSAccessKeyId: creds.accessid,\r\n\t\t\t\t\t\t\tsignature: creds.signature,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tsignatureUrl(creds.host + '/' + position + SJS + format).then(r => {\r\n\t\t\t\t\t\t\t\tif (r[1].data.code == 201) {\r\n\t\t\t\t\t\t\t\t\tthis.sendMsg({\r\n\t\t\t\t\t\t\t\t\t\turl: r[1].data.data,\r\n\t\t\t\t\t\t\t\t\t\tmsg: msg\r\n\t\t\t\t\t\t\t\t\t}, 'voice');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: r[1].data.data\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: err\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 预览图片\r\n\t\t\tshowPic(msg) {\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tindicator: \"none\",\r\n\t\t\t\t\tcurrent: msg.content.url,\r\n\t\t\t\t\turls: this.msgImgList\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 播放语音\r\n\t\t\tplayVoice(msg) {\r\n\t\t\t\tconsole.log(msg)\r\n\t\t\t\tthis.playMsgid = msg.id;\r\n\t\t\t\tthis.AUDIO.src = msg.content.url;\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\tthis.AUDIO.play();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 录音开始\r\n\t\t\tvoiceBegin(e) {\r\n\t\t\t\tif (e.touches.length > 1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.initPoint.Y = e.touches[0].clientY;\r\n\t\t\t\tthis.initPoint.identifier = e.touches[0].identifier;\r\n\t\t\t\tthis.RECORDER.start({\r\n\t\t\t\t\tformat: \"mp3\"\r\n\t\t\t\t}); //录音开始,\r\n\t\t\t},\r\n\t\t\t//录音开始UI效果\r\n\t\t\trecordBegin(e) {\r\n\t\t\t\tthis.recording = true;\r\n\t\t\t\tthis.voiceTis = '松开 结束';\r\n\t\t\t\tthis.recordLength = 0;\r\n\t\t\t\tthis.recordTimer = setInterval(() => {\r\n\t\t\t\t\tthis.recordLength++;\r\n\t\t\t\t}, 1000)\r\n\t\t\t},\r\n\t\t\t// 录音被打断\r\n\t\t\tvoiceCancel() {\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t\tthis.voiceTis = '按住 说话';\r\n\t\t\t\tthis.recordTis = '手指上滑 取消发送'\r\n\t\t\t\tthis.willStop = true; //不发送录音\r\n\t\t\t\tthis.RECORDER.stop(); //录音结束\r\n\t\t\t},\r\n\t\t\t// 录音中(判断是否触发上滑取消发送)\r\n\t\t\tvoiceIng(e) {\r\n\t\t\t\tif (!this.recording) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet touche = e.touches[0];\r\n\t\t\t\t//上滑一个导航栏的高度触发上滑取消发送\r\n\t\t\t\tif (this.initPoint.Y - touche.clientY >= uni.upx2px(100)) {\r\n\t\t\t\t\tthis.willStop = true;\r\n\t\t\t\t\tthis.recordTis = '松开手指 取消发送'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.willStop = false;\r\n\t\t\t\t\tthis.recordTis = '手指上滑 取消发送'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 结束录音\r\n\t\t\tvoiceEnd(e) {\r\n\t\t\t\tif (!this.recording) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t\tthis.voiceTis = '按住 说话';\r\n\t\t\t\tthis.recordTis = '手指上滑 取消发送'\r\n\t\t\t\tthis.RECORDER.stop(); //录音结束\r\n\t\t\t},\r\n\t\t\t//录音结束(回调文件)\r\n\t\t\trecordEnd(e) {\r\n\t\t\t\tclearInterval(this.recordTimer);\r\n\t\t\t\tif (!this.willStop) {\r\n\t\t\t\t\tlet msg = {\r\n\t\t\t\t\t\tlength: 0,\r\n\t\t\t\t\t\turl: e.tempFilePath,\r\n\t\t\t\t\t\ttime: this.recordLength\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet min = parseInt(this.recordLength / 60);\r\n\t\t\t\t\tlet sec = this.recordLength % 60;\r\n\t\t\t\t\tmin = min < 10 ? '0' + min : min;\r\n\t\t\t\t\tsec = sec < 10 ? '0' + sec : sec;\r\n\t\t\t\t\tmsg.length = min + ':' + sec;\r\n\t\t\t\t\tconsole.log(msg, 'msg.url')\r\n\t\t\t\t\tthis.uploadOss(msg)\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('取消发送录音');\r\n\t\t\t\t}\r\n\t\t\t\tthis.willStop = false;\r\n\t\t\t},\r\n\t\t\t// 切换语音/文字输入\r\n\t\t\tswitchVoice() {\r\n\t\t\t\tthis.hideDrawer();\r\n\t\t\t\tthis.isVoice = this.isVoice ? false : true;\r\n\t\t\t},\r\n\t\t\tdiscard() {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\t@import \"@/static/HM-chat/css/style.scss\"; \r\n\t\r\n</style> \n ","import mod from \"-!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./HM-chat.vue?vue&type=style&index=0&id=6837bb2e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./HM-chat.vue?vue&type=style&index=0&id=6837bb2e&lang=scss&scoped=true&\""],"sourceRoot":""}